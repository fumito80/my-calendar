(()=>{"use strict";var e={803:(e,t,n)=>{n.d(t,{$:()=>r,s:()=>c,t:()=>s});const a=864e5;function r(e){return document.querySelector(e)}function o(e){return 864e5*Math.trunc(Number(e)/864e5)+54e6}function s(){const e=new Date(o((new Date).setDate(1)));return new Date(Number(e)-(e.getDay()+6)%7*a)}function c(e){const t=e.sort(((e,t)=>Number(new Date(e.dateStr))-Number(new Date(t.dateStr)))),n=r(".grid");n.innerHTML="";const c=Number(s()),{dates:i}=[...Array(91)].reduce(((e,t,n)=>{const r=new Date(c+a*n),o=e.myEvents.filter((e=>r.toLocaleDateString().replaceAll("/","-")===e.dateStr));return{myEvents:e.myEvents.slice(o.length),dates:[...e.dates,{date:r,events:o}]}}),{myEvents:t,dates:[]});var d;n.append(...["月","火","水","木","金","土","日"].map((e=>{const t=document.createElement("div");return t.textContent=e,t})),...i.map((d=o(Date.now()),({date:e,events:t})=>{const n=Object.assign(document.createElement("div"),{"data-date":e.toLocaleDateString(),title:1===e.getDate()?e.toLocaleDateString():e.getDate()});return Number(e)===d&&n.classList.add("today"),n.append(...t.map((({summary:e,eventType:t})=>Object.assign(document.createElement("div"),{title:e,className:t})))),n})))}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=n(803);const r=["https://apis.google.com/js/api.js","https://accounts.google.com/gsi/client"],o=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],s=["https://www.googleapis.com/auth/calendar.readonly"],c={21:"event",12:"anniversary",15:"owner"};async function i(){const{result:e}=await gapi.client.calendar.calendarList.list();return e.items.map((({id:e,colorId:t})=>({id:e,eventType:c[t]})))}async function d([e,...t],n=[]){if(!e)return n;const r=await async function(e){return(await gapi.client.calendar.events.list({calendarId:e.id,timeMin:(0,a.t)().toISOString(),showDeleted:!1,singleEvents:!0,maxResults:30,orderBy:"startTime"})).result.items.map((t=>({eventType:"祝日"===t.description&&"event"===e.eventType?"holiday":e.eventType,dateStr:t.start.date,summary:t.summary})))}(e);return d(t,[...n,...r])}function l(){const e=(0,a.$)(".api-key")?.value,t=(0,a.$)(".client-id")?.value;return e&&t?Promise.resolve({apiKey:e,clientId:t}):Promise.reject()}async function u(e){return gapi.client.init({apiKey:e.apiKey,discoveryDocs:o})}function p(e,t,n){return({access_token:a,error:r})=>{void 0!==r&&n(r),sessionStorage.setItem("accessToken",a),t(e)}}async function m(){return new Promise((e=>{gapi.load("client",e)}))}(0,a.$)(".form-config")?.addEventListener("submit",(e=>{(async function(e){const t="undefined"!=typeof gapi?gapi.client?.getToken():void 0;if(t&&await async function(e){return!!(await fetch(`https://oauth2.googleapis.com/tokeninfo?access_token=${e}`).then((e=>e.json()))).azp}(t.access_token))return i().then(d).then(a.s).catch(console.error);const n=e.map((e=>new Promise((t=>{const n=document.head.appendChild(document.createElement("script"));n.src=e,n.addEventListener("load",t)}))));Promise.all(n).then(m).then(l).then((async e=>new Promise(((t,n)=>{google.accounts.oauth2.initTokenClient({scope:s.join(" "),client_id:e.clientId,callback:p(e,t,n)}).requestAccessToken({prompt:""})})))).then(u).then(i).then(d).then(a.s).catch(console.error)})(r),e.preventDefault()}))})();